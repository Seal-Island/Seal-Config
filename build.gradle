plugins {
    id 'java'
    id "com.github.johnrengelman.shadow" version "6.1.0"
}

group = 'com.focamacho.sealconfig'
version = '1.1'
archivesBaseName = 'SealConfig'

repositories {
    mavenCentral()
}

dependencies {
    compile files("./libs/Jankson-1.2.0.jar")
    compile group: 'commons-io', name: 'commons-io', version: '2.7'
    compile group: 'org.apache.commons', name: 'commons-text', version: '1.9'
    compileOnly group: "com.google.code.findbugs", name: "jsr305", version: "3.0.2"
}

tasks.build.dependsOn(shadowJar)

//Realocar pacotes para evitar conflitos
shadowJar {
    relocate 'org.apache.commons.text', 'com.focamacho.sealconfig.relocated.org.apache.commons.text'
    relocate 'blue.endless.jankson', 'com.focamacho.sealconfig.relocated.blue.endless.jankson'
}

tasks.shadowJar.configure {
    classifier = null
}

tasks.withType(JavaCompile) {
    options.encoding("UTF-8")
}

jar.enabled = false